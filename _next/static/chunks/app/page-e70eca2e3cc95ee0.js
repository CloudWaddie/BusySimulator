(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{439:(e,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>a});var t=i(5155),o=i(2115),s=i(4877);function a(){let e="/BusySimulator",[n,i]=(0,o.useState)([]),a=(0,o.useRef)({}),l=(0,o.useRef)(n);l.current=n,(0,o.useEffect)(()=>{fetch("".concat(e,"/config.json")).then(e=>e.json()).then(e=>{i(e.map(e=>({...e,isPlaying:!1,notificationCount:0,speed:50})))})},[e]),(0,o.useEffect)(()=>(n.length>0&&n.forEach(n=>{if(!a.current[n.id]){let i=new s.Howl({src:["".concat(e,"/sounds/").concat(n.sound)],loop:!1});a.current[n.id]={sound:i,timeoutId:null,playLoop:function(){let e=l.current.find(e=>e.id===n.id);if(!e||!e.isPlaying)return void this.stopLoop();let i=Math.pow(parseInt(e.speed)+15,1.2)/10,t=Math.round(Math.random()*(500*i-200*i)+200*i);this.timeoutId=setTimeout(()=>{var i,t,o;(null==(i=a.current[n.id])?void 0:i.sound.playing())&&(null==(o=a.current[n.id])||o.sound.stop()),null==(t=a.current[n.id])||t.sound.play(),c(n.id,{notificationCount:e.notificationCount+1}),this.playLoop()},t)},stopLoop:function(){clearTimeout(this.timeoutId),this.sound.stop()}}}}),()=>{Object.values(a.current).forEach(e=>{e.stopLoop()})}),[n.length,e]);let c=(e,n)=>{i(i=>i.map(i=>i.id===e?{...i,...n}:i))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("header",{style:{background:"url('".concat(e,"/logo.png') top center no-repeat"),backgroundSize:"contain"},children:[(0,t.jsx)("h1",{style:{display:"none"},children:"Busy Simulator"}),(0,t.jsxs)("div",{id:"bubble",children:[(0,t.jsx)("h2",{children:"Feign importance with repeating app sounds!"}),"Click an app to begin.",(0,t.jsx)("strong",{id:"mobile-tip",children:"(HINT: Turn phone off silent)"})]})]}),(0,t.jsx)("div",{className:"container",children:n.map(i=>(0,t.jsxs)("div",{id:i.id,className:"app",children:[(0,t.jsxs)("a",{onClick:e=>{e.preventDefault(),(e=>{let i=n.find(n=>n.id===e);if(!i)return;let t=a.current[e],o=!i.isPlaying;c(e,{isPlaying:o,notificationCount:+!!o}),o?(t.sound.play(),setTimeout(()=>t.playLoop(),0)):t.stopLoop()})(i.id)},href:"#",children:[(0,t.jsxs)("div",{className:"app-icon",children:[(0,t.jsx)("img",{src:"".concat(e,"/icons/").concat(i.icon),alt:i.name,draggable:!1}),(0,t.jsx)("div",{className:"badge",style:{display:i.notificationCount>0?"block":"none"},children:i.notificationCount})]}),(0,t.jsx)("label",{className:i.isPlaying?"selected":"",children:i.name})]}),(0,t.jsx)("div",{className:"slidecontainer",children:(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:i.speed,className:"slider",onChange:e=>{c(i.id,{speed:e.target.value})}})})]},i.id))})]})}},7455:(e,n,i)=>{Promise.resolve().then(i.bind(i,439))}},e=>{e.O(0,[877,441,964,358],()=>e(e.s=7455)),_N_E=e.O()}]);